/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package org.json;

import org.junit.Test;
import static org.junit.Assert.*;

public class JsonParserTest {
    @Test public void simpleKeyValue() throws Exception {
        JsonParser parser = new JsonParser();
        JsonResult result = parser.parse("{ \"key\": \"Hello, world!\" }");
        assertEquals(result.getString("key"), "Hello, world!");
    }

    @Test public void multipleUniqueKeys() throws Exception {
        JsonParser parser = new JsonParser();
        JsonResult result = parser.parse("{ \"key1\": \"value1\", \"key2\": 22.23, \"key3\": -123 }");
        assertEquals(result.getString("key1"), "value1");
        assertEquals(result.getDouble("key2"), 22.23, 0.00);
        assertEquals(result.getInt("key3"), -123);
    }

    @Test public void objectValue() throws Exception {
        JsonParser parser = new JsonParser();
        JsonResult result = parser.parse("{ \"key\": { \"innerkey\": 10 }, \"key2\": 1 }");
        assertEquals(result.getObject("key").getInt("innerkey"), 10);
        assertEquals(result.getInt("key2"), 1);
    }

    @Test public void duplicatekeys() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": 1, \"key\": 2 }"));
    }

    @Test public void emptyKey() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"\": 1 }"));
    }

    @Test public void emptyValue() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": }"));
    }

    @Test public void missingSeparator() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\" 1 }"));
    }

    @Test public void missingStartBracket() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse(" \"key\": 1 }"));
    }

    @Test public void missingEndBracket() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": 1"));
    }

    @Test public void extraDelimiter() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": 1, }"));
    }

    @Test public void nullValues() throws Exception {
        JsonParser parser = new JsonParser();
        JsonResult result = parser.parse("{ \"key\": null, \"key2\": 1 }");
        assertEquals(result.isNull("key"), true);
        assertEquals(result.isNull("key2"), false);
    }

    @Test public void arrayValue() throws Exception {
        JsonParser parser = new JsonParser();
        JsonResult result = parser.parse("{ \"key\": [\"string one\", -123, 2.345, null, [1, 2, 3], { \"inner key\": \"value\" }]}");
        JsonArray array = result.getArray("key");
        assertEquals(array.getString(0), "string one");
        assertEquals(array.getInt(1), -123);
        assertEquals(array.getDouble(2), 2.345, 0.00);
        assertEquals(array.isNull(3), true);
        JsonArray innerArray = array.getArray(4);
        assertEquals(innerArray.getInt(0), 1);
        assertEquals(innerArray.getInt(1), 2);
        assertEquals(innerArray.getInt(2), 3);
        JsonResult innerObject = array.getObject(5);
        assertEquals(innerObject.getString("inner key"), "value");
    }

    @Test public void badNullValues() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": none }"));
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": NULL }"));
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": n"));
    }

    @Test public void unDelimitedKey() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key: 1 }"));
    }

    @Test public void unDelimitedValue() throws Exception {
        JsonParser parser = new JsonParser();
        assertThrows(Exception.class, () -> parser.parse("{ \"key\": \"value }"));
    }
}
